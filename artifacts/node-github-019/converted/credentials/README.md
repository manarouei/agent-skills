# GitHub API Credential

Generated by `agent-skills/credential-convert` for correlation ID `node-github-019`.

## Overview

This credential provides authentication for GitHub API access using personal access tokens. It supports both GitHub.com and GitHub Enterprise instances.

## Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| `server` | string | Yes | `https://api.github.com` | GitHub server URL. Change for Enterprise instances. |
| `user` | string | No | - | GitHub username (optional, for reference) |
| `accessToken` | string | Yes | - | Personal access token with appropriate scopes |

## Authentication

Uses token-based authentication with the `Authorization` header:
```
Authorization: token {accessToken}
```

## Usage Example

```python
from credentials.githubApi import GithubApiCredential

# Create credential instance
cred = GithubApiCredential({
    "server": "https://api.github.com",
    "user": "myusername",
    "accessToken": "ghp_xxxxxxxxxxxx"
})

# Test the credential
result = cred.test()
if result["success"]:
    print(f"Connected as: {result['data']['username']}")

# Get auth headers for requests
headers = cred.get_auth_headers()

# Make API request
import requests
response = requests.get(
    cred.get_api_url("/repos/owner/repo"),
    headers=headers,
    timeout=10
)
```

## Helper Methods

### `get_auth_headers() -> Dict[str, str]`
Returns authentication headers ready to use with `requests`:
- `Authorization`: Token with access token
- `Accept`: GitHub API version header
- `User-Agent`: Client identifier

### `get_server_url() -> str`
Returns the configured server URL (without trailing slash).

### `get_api_url(endpoint: str = "") -> str`
Constructs full API URL by joining server URL with endpoint.

## Testing

The credential tests itself by calling the `/user` endpoint, which returns authenticated user information.

**Success Response:**
```json
{
  "success": true,
  "message": "Successfully connected to GitHub as username",
  "data": {
    "user_id": 12345,
    "username": "myusername",
    "name": "My Name",
    "email": "user@example.com",
    "server": "https://api.github.com"
  }
}
```

**Error Responses:**
- `401`: Invalid access token
- `403`: Access forbidden (check permissions/rate limits)
- Timeout: Network issues or invalid server URL

## GitHub Enterprise

For GitHub Enterprise, set the `server` property to your enterprise instance:
```python
{
    "server": "https://github.mycompany.com/api/v3",
    "accessToken": "ghp_xxxxxxxxxxxx"
}
```

## Creating a Personal Access Token

1. Go to GitHub Settings → Developer settings → Personal access tokens
2. Click "Generate new token (classic)"
3. Select required scopes based on your needs:
   - `repo`: Full control of repositories
   - `user`: Read user profile data
   - `admin:org`: Organization access
   - etc.
4. Generate and copy the token (starts with `ghp_`)

## Sync-Celery Safety

✅ This credential is **sync-Celery safe**:
- No `async`/`await` usage
- Uses synchronous `requests` library
- All network calls have explicit 10-second timeouts
- No background threads or processes

## Dependencies

- `requests`: Synchronous HTTP client (already in requirements.txt)

## Source

Converted from TypeScript credential definition:
- **File**: `GithubApi.credentials.ts`
- **Location**: `packages/nodes-base/credentials/`
- **n8n Repository**: https://github.com/n8n-io/n8n

## Related

- **Node**: `github.py` (GitHub node implementation)
- **Base Class**: `base.py` (BaseCredential)
